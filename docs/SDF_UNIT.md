# SdfUnit 模块说明

`SdfUnit` 模块实现了 Radix-2^2 单路延时反馈（Single-Path Delay Feedback，SDF）算法的一级处理单元，可用于构建参数化的 N 点 FFT/IFFT。该单元在 `FFT64.v` 中被多次实例化，是 FFT 计算的核心部件之一。

## 参数
- `N`：FFT 点数，决定内部计数器的位宽。
- `M`：该级所需的旋转因子分辨率。对于 64 点 FFT，各级典型取值为 64、16、4 等。
- `WIDTH`：输入输出数据宽度。

## 接口
- **输入**
  - `clock`：时钟信号。
  - `reset`：高电平异步复位。
  - `di_en`：输入数据使能。
  - `di_re` / `di_im`：复数输入数据的实部与虚部。
- **输出**
  - `do_en`：输出数据有效信号。
  - `do_re` / `do_im`：处理后的复数输出数据。

## 内部结构
`SdfUnit` 包含两个蝴蝶运算级，每级后面跟随相应深度的延时线。第一级根据当前输入计数产生蝶形运算与延时切换；第二级在前一级基础上进一步组合，并在需要时与查找表 `Twiddle` 取得的旋转因子相乘。

当 `M` 等于 2 表示最后一级，此时无需再乘以旋转因子，乘法单元会被旁路以节省资源。模块通过内部计数逻辑产生数据流控制信号，使得输入样本在管线充满后能够持续地逐点输出。

## 功能摘要
- 将串行输入的复数样本按照 Radix-2^2 SDF 流水线进行两级蝴蝶处理。
- 根据当前阶段选择合适的旋转因子完成乘法运算或在最后一级旁路乘法。
- 输出数据在经过必要延迟后以 `do_en` 同步的方式连续给出。

该模块与 `Butterfly`、`DelayBuffer`、`Multiply` 及 `Twiddle` 模块配合，构成可级联的 FFT 运算单元，在 `FFT64`、`IFFT64` 等顶层模块中发挥作用。
